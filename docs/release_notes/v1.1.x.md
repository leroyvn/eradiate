# v1.1.x series (next stable)

## v1.1.0 (upcoming release)

### Changed

* ⚠️ The radiometric kernel is upgraded to upstream Mitsuba v3.7.1
  ({ghpr}`531`). This has the following consequences:

  * When outputting Stokes vector components and variance, the variance product
    only contains data for the I component (the others are set to NaN).
  * The kernel log redirection feature was removed and the
    :mod:`eradiate.kernel.logging` module was deleted.
  * Expert interface users should now use the new `arectangle` shape plugin
    instead of `rectangle`. The latter has been modified to describe rectangles
    as triangulated meshes, which can be problematic as the native kd-tree used
    for double-precision ray intersections is lacking safeguards to guarantee
    that meshes are watertight: `arectangle` brings back the prior
    implementation of `rectangle`, which doesn't have these problems.
  * The {func}`mitsuba.load_dict`'s default behaviour has changed and performs
    optimization that are generally not wanted within Eradiate. A new
    {func}`.mi_load_dict` wrapper disables these optimizations, preserving prior
    behaviour, should be preferred to load Mitsuba objects in Eradiate.

* The {class}`.ParticleLayer` class's constructor now warns if the specified
  reference wavelength (default: 550 nm) is missing from the `w` coordinate of
  the aerosol optical property dataset ({ghpr}`530`).
* ⚠️ Astropy is replaced by `Skyfield <https://rhodesmill.org/skyfield/>`__ for
  astronomical calculations ({ghpr}`532`). In practice, this applies to the
  {class}`.SolarIrradianceSpectrum` class.
* The documentation and default parameters of the Hapke BSDF have been updated
  ({ghpr}`536`).

### Added

* The {class}`AstroObjectIllumination` class now has the additional factory
  alias `astroobject`, consistent with the associated Mitsuba plugin
  ({ghpr}`529`).
* Added the :class:`.MaignanBSDF` class, a polarized surface reflection model
  introduced by :cite:p:`Maignan2009PolarizedReflectance` ({ghpr}`534`).
